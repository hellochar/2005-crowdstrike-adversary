(this["webpackJsonp2005-crowdstrike-adversary"]=this["webpackJsonp2005-crowdstrike-adversary"]||[]).push([[0],{273:function(e,t,n){},274:function(e,t,n){},277:function(e,t,n){"use strict";n.r(t);var a=n(6),i=n(0),r=n.n(i),o=n(119),s=n.n(o),c=n(128),l=n(11),h=n(57),u=n(13),d=(n(117),n(123)),m=n(2),p=n(5),v=n(1),f=n(129),g=n(130),b=n(124),w=n(3),y=n(4),x=function(){function e(t,n,a){Object(m.a)(this,e),this.x=t,this.y=n,this.z=a}return Object(p.a)(e,[{key:"dot2",value:function(e,t){return this.x*e+this.y*t}},{key:"dot3",value:function(e,t,n){return this.x*e+this.y*t+this.z*n}}]),e}(),j=[new x(1,1,0),new x(-1,1,0),new x(1,-1,0),new x(-1,-1,0),new x(1,0,1),new x(-1,0,1),new x(1,0,-1),new x(-1,0,-1),new x(0,1,1),new x(0,-1,1),new x(0,1,-1),new x(0,-1,-1)],O=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],E=new Array(512),P=new Array(512);!function(e){e>0&&e<1&&(e*=65536),(e=Math.floor(e))<256&&(e|=e<<8);for(var t=0;t<256;t++){var n;n=1&t?O[t]^255&e:O[t]^e>>8&255,E[t]=E[t+256]=n,P[t]=P[t+256]=j[n%12]}}(0);Math.sqrt(3),Math.sqrt(3);function M(e){return e*e*e*(e*(6*e-15)+10)}function T(e,t,n){return(1-n)*e+n*t}function k(e,t){var n=Math.floor(e),a=Math.floor(t);e-=n,t-=a;var i=P[(n&=255)+E[a&=255]].dot2(e,t),r=P[n+E[a+1]].dot2(e,t-1),o=P[n+1+E[a]].dot2(e-1,t),s=P[n+1+E[a+1]].dot2(e-1,t-1),c=M(e);return T(T(i,o,c),T(r,s,c),M(t))}function D(e,t,n){return(n=v.k.clamp((n-e)/(t-e),0,1))*n*(3-2*n)}var A=function(e){Object(w.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,function(e){for(var t=new v.h,n=Z(e.image,128).imageData,a=n.width,i=n.height,r=0;r<a;r++)for(var o=0;o<i;o++){var s=v.k.mapLinear(r+.5,0,a,-a/2,a/2),c=v.k.mapLinear(o+.5,0,i,i/2,-i/2),l=4*(r+a*o),h=n.data[l]/255,u=n.data[l+1]/255,d=n.data[l+2]/255,m=50*(.2126*h+.7152*u+.0722*d);t.vertices.push(new v.E(s,c,m)),t.colors.push(new v.d(h,u,d))}var p=200/Math.max(a,i);return t.scale(p,p,1),console.log(t),t}(e),function(){var e=(new v.B).load("/2005-crowdstrike-adversary/textures/disc.png");e.onUpdate=function(){return t.needsUpdate=!0};var t=new v.t({vertexColors:!0,map:e,transparent:!0,alphaTest:.2,sizeAttenuation:!0,size:6});return t}())).source=e,a.geom=void 0,a.originalPositions=void 0,a.originalColors=void 0,a.mat=void 0,a.geom=a.geometry,a.mat=a.material,a.originalPositions=a.geom.vertices.map((function(e){return e.clone()})),a.originalColors=a.geom.colors.map((function(e){return e.clone()})),a}return Object(p.a)(n,[{key:"animate",value:function(){for(var e=performance.now()/1e3,t=e%10<5?"mainnav":"heightmap",n=0;n<this.geom.vertices.length;n++){if("heightmap"===t)this.animateHeightmap(n,e);else switch(Q.particleDistortion){case"messycircle":this.animateCircleMessy(n,e);break;case"noiseflow":this.animateNoiseflow(n,e);break;case"sphere":this.animateSphere(n,e)}var a=this.geom.vertices[n],i=this.geom.colors[n];a.lerp(L,.2),i.lerp(C,.15)}this.geom.colorsNeedUpdate=!0,this.geom.verticesNeedUpdate=!0}},{key:"animateSphere",value:function(e,t){this.geom.vertices[e],this.geom.colors[e];var n=this.originalPositions[e],a=(this.originalColors[e],n.x),i=n.y,r=(Math.atan2(i,a),Math.sqrt(1e4-a*a-i*i));L.set(a,i,r)}},{key:"animateNoiseflow",value:function(e,t){this.geom.vertices[e],this.geom.colors[e];var n=this.originalPositions[e],a=(this.originalColors[e],k(n.x/20,n.y/20+.5*t-4.213)),i=k(n.x/20+1e3,n.y/20+.5*t+26.586),r=k(n.x/20+9903,n.y/20-200+.5*t+90.492);L.set(n.x+50*a,n.y+50*i,50*r),C.setRGB(.92,.91,.93)}},{key:"animateCircleMessy",value:function(e,t){this.geom.vertices[e],this.geom.colors[e],this.originalPositions[e],this.originalColors[e];var n=Math.atan2(this.originalPositions[e].y,this.originalPositions[e].x);L.set(80*Math.cos(n)+6*k(e/10,t)-3,80*Math.sin(n)+6*k(e/10+1.953,t+399)-3,this.originalPositions[e].z+6*Math.sin(8*n+2.5*t))}},{key:"animateHeightmap",value:function(e,t){var n=this.geom.vertices[e],a=(this.geom.colors[e],this.originalPositions[e]),i=this.originalColors[e];L.set(a.x,a.y,a.z+1*Math.sin(n.x/4+n.y/7+.5*t)),C.set(i)}}]),n}(v.s);var L=new v.E,C=new v.d;var S=n(32),R=n(14);function N(e){for(var t="",n=0;n<(arguments.length<=1?0:arguments.length-1);n++)t+=e[n],t+=n+1<1||arguments.length<=n+1?void 0:arguments[n+1];return t+=e[e.length-1]}function z(){var e=Object(S.a)(["\nuniform sampler2D tSource;\nuniform vec3[10] gradient;\nuniform int gradientLength;\nuniform bool transparency;\nuniform bool enabled;\nuniform float maxBrightness;\nuniform float minBrightness;\n\nvarying vec2 vUv;\n\nvec4 getGradientColor(float t) {\n  float tOnGradient = t * float(gradientLength);\n  int lowStop = int(tOnGradient);\n  int highStop = int(tOnGradient) + 1;\n  float lerpAmount = tOnGradient - float(lowStop);\n\n  vec3 colorLow = gradient[lowStop];\n  vec3 colorHigh = gradient[highStop];\n\n  float alpha = 1.0;\n  if (transparency && lowStop == 0) {\n    alpha = lerpAmount;\n  }\n\n  return vec4(mix(colorLow, colorHigh, lerpAmount), alpha);\n}\n\nvoid main() {\n  vec4 baseColor = texture2D( tSource, vUv );\n\n  if (enabled) {\n    float brightness = dot(baseColor.rgb, vec3(0.299, 0.587, 0.114));\n    float normalizedBrightness = smoothstep(minBrightness, maxBrightness, brightness);\n\n    vec4 outColor = getGradientColor(normalizedBrightness);\n\n    gl_FragColor = outColor;\n  } else {\n    gl_FragColor = baseColor;\n  }\n}\n"]);return z=function(){return e},e}function F(){var e=Object(S.a)(["\nvarying vec2 vUv;\n\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n"]);return F=function(){return e},e}var I=function(){function e(t,n,a,i){Object(m.a)(this,e),this.source=t,this.maxBrightness=a,this.minBrightness=i,this.target=void 0,this.fsQuad=void 0,this.material=void 0,this.target=new v.F(t.image.width,t.image.height),this.material=new B(t,n,a,i),this.fsQuad=new R.a.FullScreenQuad(this.material)}return Object(p.a)(e,[{key:"texture",get:function(){return this.target.texture}}]),Object(p.a)(e,[{key:"render",value:function(e){e.setRenderTarget(this.target),this.fsQuad.render(e),e.setRenderTarget(null)}}]),e}(),B=function(e){Object(w.a)(n,e);var t=Object(y.a)(n);function n(e,a,i,r){var o;return Object(m.a)(this,n),(o=t.call(this,{uniforms:{tSource:{value:e},gradient:{value:new Array(10).fill(0).map((function(){return new v.d}))},gradientLength:{value:0},transparency:{value:!0},enabled:{value:!0},maxBrightness:{value:i},minBrightness:{value:r}},vertexShader:Y,fragmentShader:U,transparent:!0})).update(a),o.needsUpdate=!0,o}return Object(p.a)(n,[{key:"update",value:function(e){var t=this,n=e.gradient.split(" ").map((function(e){return new v.d(e)})),a=n.length;n.forEach((function(e,n){t.uniforms.gradient.value[n]=e})),this.uniforms.gradientLength.value=a,this.uniforms.transparency.value=e.gradientTransparency,this.uniforms.enabled.value=e.gradientEnabled,this.needsUpdate=!0}}]),n}(v.x),Y=N(F()),U=N(z()),H=function(e,t){void 0===t&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.enabled=!0,this.target=new v.E,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:v.j.ROTATE,MIDDLE:v.j.DOLLY,RIGHT:v.j.PAN},this.touches={ONE:v.z.ROTATE,TWO:v.z.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return l.phi},this.getAzimuthalAngle=function(){return l.theta},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.getState=function(){return{target0:n.target0.clone(),position0:n.position0.clone(),zoom0:n.zoom0}},this.loadState=function(e){n.target.copy(e.target0),n.object.position.copy(e.position0),n.object.zoom=e.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(a),n.update()},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(a),n.update(),s=o.NONE},this.update=function(){var t=new v.E,i=(new v.u).setFromUnitVectors(e.up,new v.E(0,1,0)),r=i.clone().inverse(),p=new v.E,f=new v.u,g=2*Math.PI;return function(){var e=n.object.position;t.copy(e).sub(n.target),t.applyQuaternion(i),l.setFromVector3(t),n.autoRotate&&s===o.NONE&&P(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(l.theta+=h.theta*n.dampingFactor,l.phi+=h.phi*n.dampingFactor):(l.theta+=h.theta,l.phi+=h.phi);var v=n.minAzimuthAngle,b=n.maxAzimuthAngle;return isFinite(v)&&isFinite(b)&&(v<-Math.PI?v+=g:v>Math.PI&&(v-=g),b<-Math.PI?b+=g:b>Math.PI&&(b-=g),l.theta=v<=b?Math.max(v,Math.min(b,l.theta)):l.theta>(v+b)/2?Math.max(v,l.theta):Math.min(b,l.theta)),l.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,l.phi)),l.makeSafe(),l.radius*=u,l.radius=Math.max(n.minDistance,Math.min(n.maxDistance,l.radius)),!0===n.enableDamping?n.target.addScaledVector(d,n.dampingFactor):n.target.add(d),t.setFromSpherical(l),t.applyQuaternion(r),e.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(h.theta*=1-n.dampingFactor,h.phi*=1-n.dampingFactor,d.multiplyScalar(1-n.dampingFactor)):(h.set(0,0,0),d.set(0,0,0)),u=1,!!(m||p.distanceToSquared(n.object.position)>c||8*(1-f.dot(n.object.quaternion))>c)&&(n.dispatchEvent(a),p.copy(n.object.position),f.copy(n.object.quaternion),m=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",q,!1),n.domElement.removeEventListener("pointerdown",Y,!1),n.domElement.removeEventListener("wheel",_,!1),n.domElement.removeEventListener("touchstart",X,!1),n.domElement.removeEventListener("touchend",V,!1),n.domElement.removeEventListener("touchmove",Z,!1),n.domElement.ownerDocument.removeEventListener("pointermove",U,!1),n.domElement.ownerDocument.removeEventListener("pointerup",H,!1),n.domElement.removeEventListener("keydown",G,!1)};var n=this,a={type:"change"},i={type:"start"},r={type:"end"},o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},s=o.NONE,c=1e-6,l=new v.y;n.spherical=l;var h=new v.y,u=1,d=new v.E,m=!1,p=new v.D,f=new v.D,g=new v.D,b=new v.D,w=new v.D,y=new v.D,x=new v.D,j=new v.D,O=new v.D;function E(){return Math.pow(.95,n.zoomSpeed)}function P(e){h.theta-=e}function M(e){h.phi-=e}n.rotateLeft=P,n.rotateUp=M;var T=function(){var e=new v.E;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),d.add(e)}}(),k=function(){var e=new v.E;return function(t,a){!0===n.screenSpacePanning?e.setFromMatrixColumn(a,1):(e.setFromMatrixColumn(a,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),d.add(e)}}(),D=function(){var e=new v.E;return function(t,a){var i=n.domElement;if(n.object.isPerspectiveCamera){var r=n.object.position;e.copy(r).sub(n.target);var o=e.length();o*=Math.tan(n.object.fov/2*Math.PI/180),T(2*t*o/i.clientHeight,n.object.matrix),k(2*a*o/i.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(T(t*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),k(a*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function A(e){n.object.isPerspectiveCamera?u/=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),m=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function L(e){n.object.isPerspectiveCamera?u*=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),m=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function C(e){p.set(e.clientX,e.clientY)}function S(e){b.set(e.clientX,e.clientY)}function R(e){if(1==e.touches.length)p.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);p.set(t,n)}}function N(e){if(1==e.touches.length)b.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);b.set(t,n)}}function z(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,a=Math.sqrt(t*t+n*n);x.set(0,a)}function F(e){if(1==e.touches.length)f.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),a=.5*(e.touches[0].pageY+e.touches[1].pageY);f.set(t,a)}g.subVectors(f,p).multiplyScalar(n.rotateSpeed);var i=n.domElement;P(2*Math.PI*g.x/i.clientHeight),M(2*Math.PI*g.y/i.clientHeight),p.copy(f)}function I(e){if(1==e.touches.length)w.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),a=.5*(e.touches[0].pageY+e.touches[1].pageY);w.set(t,a)}y.subVectors(w,b).multiplyScalar(n.panSpeed),D(y.x,y.y),b.copy(w)}function B(e){var t=e.touches[0].pageX-e.touches[1].pageX,a=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+a*a);j.set(0,i),O.set(0,Math.pow(j.y/x.y,n.zoomSpeed)),A(O.y),x.copy(j)}function Y(e){if(!1!==n.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){var t;switch(e.preventDefault(),n.domElement.focus?n.domElement.focus():window.focus(),e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case v.j.DOLLY:if(!1===n.enableZoom)return;!function(e){x.set(e.clientX,e.clientY)}(e),s=o.DOLLY;break;case v.j.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;S(e),s=o.PAN}else{if(!1===n.enableRotate)return;C(e),s=o.ROTATE}break;case v.j.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;C(e),s=o.ROTATE}else{if(!1===n.enablePan)return;S(e),s=o.PAN}break;default:s=o.NONE}s!==o.NONE&&(n.domElement.ownerDocument.addEventListener("pointermove",U,!1),n.domElement.ownerDocument.addEventListener("pointerup",H,!1),n.dispatchEvent(i))}(e)}}function U(e){if(!1!==n.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){if(!1===n.enabled)return;switch(e.preventDefault(),s){case o.ROTATE:if(!1===n.enableRotate)return;!function(e){f.set(e.clientX,e.clientY),g.subVectors(f,p).multiplyScalar(n.rotateSpeed);var t=n.domElement;P(2*Math.PI*g.x/t.clientHeight),M(2*Math.PI*g.y/t.clientHeight),p.copy(f),n.update()}(e);break;case o.DOLLY:if(!1===n.enableZoom)return;!function(e){j.set(e.clientX,e.clientY),O.subVectors(j,x),O.y>0?A(E()):O.y<0&&L(E()),x.copy(j),n.update()}(e);break;case o.PAN:if(!1===n.enablePan)return;!function(e){w.set(e.clientX,e.clientY),y.subVectors(w,b).multiplyScalar(n.panSpeed),D(y.x,y.y),b.copy(w),n.update()}(e)}}(e)}}function H(e){switch(e.pointerType){case"mouse":case"pen":!function(e){if(n.domElement.ownerDocument.removeEventListener("pointermove",U,!1),n.domElement.ownerDocument.removeEventListener("pointerup",H,!1),!1===n.enabled)return;n.dispatchEvent(r),s=o.NONE}()}}function _(e){!1===n.enabled||!1===n.enableZoom||s!==o.NONE&&s!==o.ROTATE||(e.preventDefault(),e.stopPropagation(),n.dispatchEvent(i),function(e){e.deltaY<0?L(E()):e.deltaY>0&&A(E()),n.update()}(e),n.dispatchEvent(r))}function G(e){!1!==n.enabled&&!1!==n.enableKeys&&!1!==n.enablePan&&function(e){var t=!1;switch(e.keyCode){case n.keys.UP:D(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:D(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:D(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:D(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function X(e){if(!1!==n.enabled){switch(e.preventDefault(),e.touches.length){case 1:switch(n.touches.ONE){case v.z.ROTATE:if(!1===n.enableRotate)return;R(e),s=o.TOUCH_ROTATE;break;case v.z.PAN:if(!1===n.enablePan)return;N(e),s=o.TOUCH_PAN;break;default:s=o.NONE}break;case 2:switch(n.touches.TWO){case v.z.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&z(e),n.enablePan&&N(e)}(e),s=o.TOUCH_DOLLY_PAN;break;case v.z.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&z(e),n.enableRotate&&R(e)}(e),s=o.TOUCH_DOLLY_ROTATE;break;default:s=o.NONE}break;default:s=o.NONE}s!==o.NONE&&n.dispatchEvent(i)}}function Z(e){if(!1!==n.enabled)switch(e.preventDefault(),e.stopPropagation(),s){case o.TOUCH_ROTATE:if(!1===n.enableRotate)return;F(e),n.update();break;case o.TOUCH_PAN:if(!1===n.enablePan)return;I(e),n.update();break;case o.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&B(e),n.enablePan&&I(e)}(e),n.update();break;case o.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&B(e),n.enableRotate&&F(e)}(e),n.update();break;default:s=o.NONE}}function V(e){!1!==n.enabled&&(n.dispatchEvent(r),s=o.NONE)}function q(e){!1!==n.enabled&&e.preventDefault()}n.domElement.addEventListener("contextmenu",q,!1),n.domElement.addEventListener("pointerdown",Y,!1),n.domElement.addEventListener("wheel",_,!1),n.domElement.addEventListener("touchstart",X,!1),n.domElement.addEventListener("touchend",V,!1),n.domElement.addEventListener("touchmove",Z,!1),n.domElement.addEventListener("keydown",G,!1),this.update()};(H.prototype=Object.create(v.g.prototype)).constructor=H;var _=function(e,t){H.call(this,e,t),this.screenSpacePanning=!1,this.mouseButtons.LEFT=v.j.PAN,this.mouseButtons.RIGHT=v.j.ROTATE,this.touches.ONE=v.z.PAN,this.touches.TWO=v.z.DOLLY_ROTATE};(_.prototype=Object.create(v.g.prototype)).constructor=_;var G,X=function(){function e(t,n){var a=this;Object(m.a)(this,e),this.canvas=t,this.state=n,this.renderer=void 0,this.scene=void 0,this.camera=void 0,this.controls=void 0,this.adversary=void 0,this.adversaryMaterial=void 0,this.timeStarted=0,this.geom=new v.r(200,200,512,512),this.textureBase=void 0,this.gradientEffect=void 0,this.pointCloud=void 0,this.maxBrightness=void 0,this.minBrightness=void 0,this.composer=void 0,this.filmPass=void 0,this.mouse=new v.D,this.spherical0=void 0,this.handleMouseMove=function(e){e.preventDefault();var t=window.innerWidth/window.innerHeight;if(a.mouse.x=(e.clientX/window.innerWidth*2-1)*t,a.mouse.y=2*(1-e.clientY/window.innerHeight)-1,a.state.parallaxEnabled&&a.state.parallaxRespondsToMouseMovement){var n=Math.PI/4*a.state.parallaxIntensity/window.innerHeight*3;a.controls.rotateLeft(-n*e.movementX),a.controls.rotateUp(-n*e.movementY)}},this.cameraTarget=void 0,this.handleWindowResize=function(){a.renderer.setSize(window.innerWidth,window.innerHeight);var e=window.innerWidth/window.innerHeight,t=150;a.camera.left=-150*e,a.camera.right=t*e,a.camera.top=t,a.camera.bottom=-150,a.camera.updateProjectionMatrix()},this.animate=function(){var e,t,n;if(requestAnimationFrame(a.animate),null!=a.cameraTarget?a.updateCameraTarget():(a.state.parallaxEnabled&&a.updateCameraParallax(),a.controls.update()),null!=a.adversaryMaterial&&null!=a.adversary){var i=D(0,5e3,performance.now()-a.timeStarted)*a.state.growLength/a.maxBrightness;a.adversaryMaterial.displacementScale=i,a.adversary.position.z=-i/2}"particles"===a.state.mode&&(null===(n=a.pointCloud)||void 0===n||n.animate());null===(e=a.gradientEffect)||void 0===e||e.material.update(a.state),null===(t=a.gradientEffect)||void 0===t||t.render(a.renderer),a.composer.render()},this.renderer=new v.G({canvas:t}),this.renderer.setPixelRatio(window.devicePixelRatio),this.scene=new v.w,this.camera=new v.p(-1,1,1,-1,-9999,9999),this.camera.position.set(0,0,100),this.camera.lookAt(0,0,0),this.handleWindowResize(),window.addEventListener("resize",this.handleWindowResize),window.addEventListener("mousemove",this.handleMouseMove),this.scene.add(new v.a(16777215)),this.scene.background=new v.d(1,1,1),this.loadDefaultImage(),this.controls=new H(this.camera,this.canvas),this.spherical0=new v.y,this.spherical0.setFromVector3(this.camera.position),this.composer=new f.a(this.renderer),this.composer.addPass(new b.a(this.scene,this.camera)),this.filmPass=new g.a(0,0,4096,0),this.composer.addPass(this.filmPass),this.setState(n),requestAnimationFrame(this.animate)}return Object(p.a)(e,[{key:"setImage",value:function(e){var t=new v.A(e);e.onload=function(){t.needsUpdate=!0},this.recreateAdversary(t)}},{key:"setState",value:function(e){var t;this.state=e,this.filmPass.uniforms.nIntensity.value=e.noiseIntensity,this.filmPass.uniforms.sIntensity.value=e.scanlineIntensity,null===(t=this.gradientEffect)||void 0===t||t.material.update(e),null!=this.adversaryMaterial&&(e.gradientEnabled?this.adversaryMaterial.map=this.gradientEffect.texture:this.adversaryMaterial.map=this.textureBase,this.adversaryMaterial.needsUpdate=!0),this.scene.background.set(e.background),"heightmap"===e.mode&&null!=this.adversary&&null==this.adversary.parent?(this.scene.add(this.adversary),this.pointCloud&&this.scene.remove(this.pointCloud)):"particles"===e.mode&&null!=this.pointCloud&&null==this.pointCloud.parent&&(this.scene.add(this.pointCloud),this.adversary&&this.scene.remove(this.adversary))}},{key:"goDiagonalView",value:function(){this.cameraTarget=new v.E(0,0,100),this.cameraTarget.applyEuler(new v.f(Math.PI/6,Math.PI/6))}},{key:"goFrontalView",value:function(){this.cameraTarget=new v.E(0,0,100)}},{key:"recreateAdversary",value:function(e){var t;null!=this.adversary&&(this.scene.remove(this.adversary),null===(t=this.adversaryMaterial)||void 0===t||t.dispose());null!=this.pointCloud&&this.scene.remove(this.pointCloud),this.textureBase=e;var n=this.createDisplacementMap(e),a=n.texture,i=n.maxBrightness,r=n.minBrightness;this.maxBrightness=i,this.minBrightness=r,this.gradientEffect=new I(e,this.state,i,r),this.adversaryMaterial=new v.n({side:v.e,map:this.gradientEffect.texture,displacementMap:a,displacementScale:0,transparent:!0,roughness:1,metalness:0}),this.state.gradientEnabled?this.adversaryMaterial.map=this.gradientEffect.texture:this.adversaryMaterial.map=this.textureBase,this.adversary=new v.l(this.geom,this.adversaryMaterial),this.pointCloud=new A(e),"heightmap"===this.state.mode?this.scene.add(this.adversary):this.scene.add(this.pointCloud),this.composer.render(),this.timeStarted=performance.now()}},{key:"loadDefaultImage",value:function(){var e=this;(new v.B).load("/2005-crowdstrike-adversary/adversaries/Buffalo.jpg",(function(t){e.recreateAdversary(t)}),(function(e){return console.log(e)}),(function(e){return console.error(e)}))}},{key:"updateCameraTarget",value:function(){null!=this.cameraTarget&&(this.camera.position.distanceTo(this.cameraTarget)<1?(this.camera.position.copy(this.cameraTarget),this.camera.lookAt(0,0,0),delete this.cameraTarget):(this.camera.position.lerp(this.cameraTarget,.1),this.camera.lookAt(0,0,0)))}},{key:"updateCameraParallax",value:function(){var e=this.controls;if(this.state.parallaxRespondsToMouseMovement){var t=.1*Math.pow(2,this.state.parallaxReturnSpeed-3),n=new v.y;n.setFromVector3(this.camera.position),e.rotateLeft((n.theta-this.spherical0.theta)*t),e.rotateUp((n.phi-this.spherical0.phi)*t)}else{e.target.copy(e.target0),e.object.position.copy(e.position0);var a=Math.PI/4*this.state.parallaxIntensity;e.rotateLeft(-a*this.mouse.x),e.rotateUp(a*this.mouse.y)}}},{key:"createDisplacementMap",value:function(e){for(var t=Z(e.image,256),n=t.imageData,a=t.canvas,i=0,r=1,o=0;o<n.data.length;o+=4){var s=.2126*(n.data[o]/255)+.7152*(n.data[o+1]/255)+.0722*(n.data[o+2]/255);i=Math.max(s,i),r=Math.min(s,r),n.data[o]=n.data[o+1]=n.data[o+2]=s}return{texture:new v.b(a),imageData:n,maxBrightness:i,minBrightness:r}}},{key:"generateDisplacementMappedGeometry",value:function(e){var t=document.createElement("canvas");t.width=e.width/10,t.height=e.height/10;var n=t.getContext("2d");if(n){n.drawImage(e,0,0,t.width,t.height);var a,i=t.width,r=t.height,o=n.getImageData(0,0,i,r),s=new v.r(i-1,r-1,i-1,r-1),c=Object(d.a)(s.vertices);try{for(c.s();!(a=c.n()).done;){var l=a.value,h=4*(v.k.mapLinear(l.x-.5,-i/2,i/2,0,i)+i*v.k.mapLinear(l.y-.5,r/2,-r/2,0,r)),u=.2126*(o.data[h]/255)+.7152*(o.data[h+1]/255)+.0722*(o.data[h+2]/255);l.z=20*u}}catch(p){c.e(p)}finally{c.f()}var m=200/Math.max(i,r);return s.scale(m,m,1),s.computeFlatVertexNormals(),s}}}]),e}();function Z(e,t){var n=document.createElement("canvas"),a=e.height/e.width*t;n.width=t,n.height=a;var i=n.getContext("2d");return i.drawImage(e,0,0,t,a),{canvas:n,imageData:i.getImageData(0,0,t,a)}}var V=function(e){var t=e.img,n=e.state,o=Object(i.useRef)(),s=r.a.useCallback((function(e){null!=e&&(o.current=new X(e,n),G=o.current)}),[]);return Object(i.useEffect)((function(){null!=o.current&&null!=t&&o.current.setImage(t)}),[t]),Object(i.useEffect)((function(){null!=o.current&&o.current.setState(n)}),[n]),Object(a.jsx)("canvas",{ref:s})},q=(n(273),n(56)),W=n(127),K=function(e){var t=e.onGotImage,n=Object(i.useCallback)((function(e,n,a){e.forEach((function(e){var n=new FileReader;n.onabort=function(){return console.log("file reading was aborted")},n.onerror=function(){return console.log("file reading has failed")},n.onload=function(){var e=document.createElement("img");e.src=n.result,t(e)},n.readAsDataURL(e)}))}),[t]),r=Object(W.a)({onDrop:n,maxFiles:1}),o=r.getRootProps,s=r.getInputProps,c=r.isDragActive;return Object(a.jsxs)("div",Object(q.a)(Object(q.a)({className:"dropzone"},o()),{},{children:[Object(a.jsx)("input",Object(q.a)({},s())),c?Object(a.jsx)("p",{children:"Drop the files here ..."}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("p",{children:"Drag 'n' drop some files here, or click to select files"}),Object(a.jsxs)("p",{children:["Press ",Object(a.jsx)("b",{children:"Z"})," to toggle the UI"]})]})]}))},Q={mode:"heightmap",particleDistortion:"noiseflow",background:"#808080",growLength:50,noiseIntensity:.25,scanlineIntensity:0,parallaxEnabled:!1,parallaxIntensity:.5,parallaxRespondsToMouseMovement:!1,parallaxReturnSpeed:3,gradientEnabled:!0,gradient:"#131B1D #31474D #FC0000 #ABABAB #FFFFFF",gradientTransparency:!0};var J=function(){var e=Object(i.useState)(),t=Object(h.a)(e,2),n=t[0],r=t[1],o=Object(i.useState)(Q),s=Object(h.a)(o,2),c=s[0],l=s[1],d=Object(i.useState)(!0),m=Object(h.a)(d,2),p=m[0],v=m[1];Object(i.useEffect)((function(){Object.assign(Q,c)}),[c]),Object(i.useEffect)((function(){var e=function(e){"KeyZ"===e.code&&v((function(e){return!e}))};return window.addEventListener("keyup",e),function(){window.removeEventListener("keyup",e)}}));var f=Object(i.useCallback)((function(){null===G||void 0===G||G.goFrontalView()}),[]),g=Object(i.useCallback)((function(){null===G||void 0===G||G.goDiagonalView()}),[]);return Object(a.jsxs)("div",{className:"App".concat(p?"":" hide-ui"),children:[Object(a.jsx)(V,{img:n,state:c}),Object(a.jsx)(K,{onGotImage:r}),Object(a.jsxs)(u.h,{data:c,onUpdate:l,children:[Object(a.jsx)(u.f,{path:"mode",label:"Mode",options:["heightmap","particles"]}),Object(a.jsx)(u.f,{path:"particleDistortion",label:"Particle Distortion",options:["noiseflow","sphere","messycircle"]}),Object(a.jsx)(u.c,{path:"background",label:"Background"}),Object(a.jsx)(u.e,{path:"growLength",label:"Grow Length",min:0,max:500,step:5}),Object(a.jsxs)(u.d,{closed:!1,title:"Postprocessing",children:[Object(a.jsx)(u.e,{path:"noiseIntensity",label:"Noise",min:0,max:1,step:.01}),Object(a.jsx)(u.e,{path:"scanlineIntensity",label:"Scanlines",min:0,max:1,step:.01})]}),Object(a.jsxs)(u.d,{closed:!1,title:"Parallax",children:[Object(a.jsx)(u.a,{path:"parallaxEnabled",label:"Parallax Enabled?"}),Object(a.jsx)(u.e,{path:"parallaxIntensity",label:"Intensity",min:0,max:2,step:.01}),Object(a.jsx)(u.a,{path:"parallaxRespondsToMouseMovement",label:"Returns to 0?"}),Object(a.jsx)(u.e,{path:"parallaxReturnSpeed",label:"Return to 0 Speed",min:0,max:6,step:.1})]}),Object(a.jsxs)(u.d,{closed:!1,title:"Gradient",children:[Object(a.jsx)(u.a,{path:"gradientEnabled",label:"Gradient Enabled?"}),Object(a.jsx)(u.g,{path:"gradient",label:"Gradient"}),Object(a.jsx)(u.a,{path:"gradientTransparency",label:"Transparency?"})]}),Object(a.jsx)(u.b,{label:"Go to Frontal View",onClick:f}),Object(a.jsx)(u.b,{label:"Go to Diagonal View",onClick:g})]})]})};function $(){var e=Object(S.a)(["\nuniform vec2 resolution; // The width and height of our screen\nuniform sampler2D feedback; // Our input texture\nuniform float time;\nuniform vec2 mouse;\n\nvarying vec2 vUv;\n\n","\n\nfloat brightness(vec3 col) {\n  return dot(col.rgb, vec3(0.299, 0.587, 0.114));\n}\n\nvoid main() {\n  vec2 uv = gl_FragCoord.xy / resolution.xy;\n  vec2 delta = 1.0 / resolution.xy;\n  vec2 mouseNorm = vec2(0.5) - mouse;\n\n  vec4 uv0 = texture2D(feedback, uv);\n  vec4 finalColor = uv0;\n\n  float dif = 1.0; // sin(time) * 0.2;\n  vec2 puv = uv;\n  for (int i = 0; i < 10; i++) {\n    vec2 offset = vec2(\n      cnoise(puv * 2. + vec2(time, 0)),\n      cnoise(puv * 2. + vec2(91.3 - time, -123.2 + time))\n    );\n    offset -= mouseNorm * 10.;\n\n    puv = puv + delta * offset * 2.;\n\n    vec4 up = texture2D(feedback, puv);\n\n    if (dif * (brightness(up.rgb) - brightness(finalColor.rgb)) > 0.) {\n      finalColor = mix(finalColor, up, 0.5);\n    }\n  }\n\n  gl_FragColor = finalColor;\n}\n"]);return $=function(){return e},e}function ee(){var e=Object(S.a)(["\n//\tClassic Perlin 2D Noise \n//\tby Stefan Gustavson\n//\nvec2 fade(vec2 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}\nvec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}\nvec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}\n\n\nfloat cnoise(vec2 P){\n  vec4 Pi = floor(P.xyxy) + vec4(0.0, 0.0, 1.0, 1.0);\n  vec4 Pf = fract(P.xyxy) - vec4(0.0, 0.0, 1.0, 1.0);\n  Pi = mod(Pi, 289.0); // To avoid truncation effects in permutation\n  vec4 ix = Pi.xzxz;\n  vec4 iy = Pi.yyww;\n  vec4 fx = Pf.xzxz;\n  vec4 fy = Pf.yyww;\n  vec4 i = permute(permute(ix) + iy);\n  vec4 gx = 2.0 * fract(i * 0.0243902439) - 1.0; // 1/41 = 0.024...\n  vec4 gy = abs(gx) - 0.5;\n  vec4 tx = floor(gx + 0.5);\n  gx = gx - tx;\n  vec2 g00 = vec2(gx.x,gy.x);\n  vec2 g10 = vec2(gx.y,gy.y);\n  vec2 g01 = vec2(gx.z,gy.z);\n  vec2 g11 = vec2(gx.w,gy.w);\n  vec4 norm = 1.79284291400159 - 0.85373472095314 * \n    vec4(dot(g00, g00), dot(g01, g01), dot(g10, g10), dot(g11, g11));\n  g00 *= norm.x;\n  g01 *= norm.y;\n  g10 *= norm.z;\n  g11 *= norm.w;\n  float n00 = dot(g00, vec2(fx.x, fy.x));\n  float n10 = dot(g10, vec2(fx.y, fy.y));\n  float n01 = dot(g01, vec2(fx.z, fy.z));\n  float n11 = dot(g11, vec2(fx.w, fy.w));\n  vec2 fade_xy = fade(Pf.xy);\n  vec2 n_x = mix(vec2(n00, n01), vec2(n10, n11), fade_xy.x);\n  float n_xy = mix(n_x.x, n_x.y, fade_xy.y);\n  return 2.3 * n_xy;\n}\n"]);return ee=function(){return e},e}function te(){var e=Object(S.a)(["\nvarying vec2 vUv;\n\nvoid main()\t{\n\tvUv = uv;\n\tgl_Position = vec4( position, 1.0 );\n}\n"]);return te=function(){return e},e}var ne=function(){function e(t,n){var a=this;Object(m.a)(this,e),this.canvas=t,this.imgTexture=n,this.renderer=void 0,this.scene=void 0,this.camera=void 0,this.textureA=void 0,this.textureB=void 0,this.bufferMaterial=void 0,this.finalMaterial=void 0,this.bufferObject=void 0,this.bufferScene=new v.w,this.quad=void 0,this.mouse=new v.D,this.animate=function(){requestAnimationFrame(a.animate),a.renderB(),a.bufferObject.material.uniforms.mouse.value=new v.D(a.mouse.x,a.mouse.y),a.bufferMaterial.uniforms.time.value+=.01,a.renderer.render(a.scene,a.camera)},this.onDocumentMouseMove=function(e){e.preventDefault(),a.mouse.x=e.clientX/window.innerWidth,a.mouse.y=1-e.clientY/window.innerHeight},this.renderer=new v.G({canvas:t}),this.scene=new v.w;var i=t,r=i.width,o=i.height;this.camera=new v.p(r/-2,r/2,o/2,o/-2,1,1e3),this.camera.position.z=2,this.textureA=new v.F(t.width,t.height,{minFilter:v.i,magFilter:v.o}),this.textureB=new v.F(t.width,t.height,{minFilter:v.i,magFilter:v.o}),this.bufferMaterial=new v.x({uniforms:{feedback:{value:this.textureA.texture},resolution:{value:new v.D(t.width,t.height)},mouse:{value:new v.D(0,0)},time:{value:Math.random()*Math.PI*2+Math.PI}},vertexShader:ae,fragmentShader:re});var s=new v.q(t.width,t.height);this.bufferObject=new v.l(s,this.bufferMaterial),this.bufferScene.add(this.bufferObject),this.finalMaterial=new v.m({map:this.textureB.texture,transparent:!0}),this.quad=new v.l(s,this.finalMaterial),this.scene.add(this.quad),this.finalMaterial.map=n,this.renderer.setRenderTarget(this.textureA),this.renderer.clear(),this.renderer.render(this.scene,this.camera),this.renderer.setRenderTarget(null),this.finalMaterial.map=this.textureB.texture,requestAnimationFrame(this.animate),console.log(this),window.addEventListener("mousemove",this.onDocumentMouseMove)}return Object(p.a)(e,[{key:"renderB",value:function(){this.renderer.setRenderTarget(this.textureB),this.renderer.clear(),this.renderer.render(this.bufferScene,this.camera),this.renderer.setRenderTarget(null)}},{key:"swap",value:function(){var e=this.textureA;this.textureA=this.textureB,this.textureB=e,this.finalMaterial.map=this.textureB.texture,this.bufferMaterial.uniforms.feedback.value=this.textureA.texture}}]),e}(),ae=N(te()),ie=N(ee()),re=N($(),ie);var oe=function(){var e=Object(i.useRef)(),t=r.a.useCallback((function(t){null!=t&&(new v.B).load("/2005-crowdstrike-adversary/tone-mapped-Buffalo.png",(function(n){t.width=n.image.width,t.height=n.image.height,e.current=new ne(t,n)}))}),[]);return Object(a.jsx)("div",{style:{background:"grey",width:"100vw",height:"100vh"},children:Object(a.jsx)("canvas",{ref:t,style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}})})},se=(n(274),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,278)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),i(e),r(e),o(e)}))});s.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(c.a,{children:Object(a.jsxs)(l.c,{children:[Object(a.jsx)(l.a,{path:"/pixelbleed",children:Object(a.jsx)(oe,{})}),Object(a.jsx)(l.a,{children:Object(a.jsx)(J,{})})]})})}),document.getElementById("root")),se()}},[[277,1,2]]]);
//# sourceMappingURL=main.22f7e8e2.chunk.js.map