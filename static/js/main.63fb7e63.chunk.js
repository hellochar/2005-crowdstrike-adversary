(this["webpackJsonp2005-crowdstrike-adversary"]=this["webpackJsonp2005-crowdstrike-adversary"]||[]).push([[0],{271:function(e,t,n){},272:function(e,t,n){},275:function(e,t,n){"use strict";n.r(t);var a=n(6),i=n(0),r=n.n(i),s=n(118),o=n.n(s),c=n(128),h=n(11),l=n(82),u=n(25),d=(n(116),n(122)),v=n(2),f=n(5),m=n(1),g=n(123),p=n(3),x=n(4),w=function(){function e(t,n,a){Object(v.a)(this,e),this.x=t,this.y=n,this.z=a}return Object(f.a)(e,[{key:"dot2",value:function(e,t){return this.x*e+this.y*t}},{key:"dot3",value:function(e,t,n){return this.x*e+this.y*t+this.z*n}}]),e}(),b=[new w(1,1,0),new w(-1,1,0),new w(1,-1,0),new w(-1,-1,0),new w(1,0,1),new w(-1,0,1),new w(1,0,-1),new w(-1,0,-1),new w(0,1,1),new w(0,-1,1),new w(0,1,-1),new w(0,-1,-1)],y=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],j=new Array(512),O=new Array(512);!function(e){e>0&&e<1&&(e*=65536),(e=Math.floor(e))<256&&(e|=e<<8);for(var t=0;t<256;t++){var n;n=1&t?y[t]^255&e:y[t]^e>>8&255,j[t]=j[t+256]=n,O[t]=O[t+256]=b[n%12]}}(0);Math.sqrt(3),Math.sqrt(3);function M(e){return e*e*e*(e*(6*e-15)+10)}function C(e,t,n){return(1-n)*e+n*t}function k(e,t){var n=Math.floor(e),a=Math.floor(t);e-=n,t-=a;var i=O[(n&=255)+j[a&=255]].dot2(e,t),r=O[n+j[a+1]].dot2(e,t-1),s=O[n+1+j[a]].dot2(e-1,t),o=O[n+1+j[a+1]].dot2(e-1,t-1),c=M(e);return C(C(i,s,c),C(r,o,c),M(t))}function B(e,t,n){return(n=m.h.clamp((n-e)/(t-e),0,1))*n*(3-2*n)}var P=function(e){Object(p.a)(n,e);var t=Object(x.a)(n);function n(e){var a;return Object(v.a)(this,n),(a=t.call(this,function(e){for(var t=new m.e,n=_(e.image,128).imageData,a=n.width,i=n.height,r=0;r<a;r++)for(var s=0;s<i;s++){var o=m.h.mapLinear(r+.5,0,a,-a/2,a/2),c=m.h.mapLinear(s+.5,0,i,i/2,-i/2),h=4*(r+a*s),l=n.data[h]/255,u=n.data[h+1]/255,d=n.data[h+2]/255,v=50*(.2126*l+.7152*u+.0722*d);t.vertices.push(new m.z(o,c,v)),t.colors.push(new m.c(l,u,d))}var f=200/Math.max(a,i);return t.scale(f,f,1),console.log(t),t}(e),function(){var e=(new m.x).load("/2005-crowdstrike-adversary/textures/disc.png");e.onUpdate=function(){return t.needsUpdate=!0};var t=new m.q({vertexColors:!0,map:e,transparent:!0,alphaTest:.2,sizeAttenuation:!0,size:6});return t}())).source=e,a.geom=void 0,a.originalPositions=void 0,a.originalColors=void 0,a.mat=void 0,a.geom=a.geometry,a.mat=a.material,a.originalPositions=a.geom.vertices.map((function(e){return e.clone()})),a.originalColors=a.geom.colors.map((function(e){return e.clone()})),a}return Object(f.a)(n,[{key:"animate",value:function(){for(var e=performance.now()/1e3,t=e%10<5?"mainnav":"heightmap",n=0;n<this.geom.vertices.length;n++){if("heightmap"===t)this.animateHeightmap(n,e);else switch(Q.particleDistortion){case"messycircle":this.animateCircleMessy(n,e);break;case"noiseflow":this.animateNoiseflow(n,e);break;case"sphere":this.animateSphere(n,e)}var a=this.geom.vertices[n],i=this.geom.colors[n];a.lerp(S,.2),i.lerp(D,.15)}this.geom.colorsNeedUpdate=!0,this.geom.verticesNeedUpdate=!0}},{key:"animateSphere",value:function(e,t){this.geom.vertices[e],this.geom.colors[e];var n=this.originalPositions[e],a=(this.originalColors[e],n.x),i=n.y,r=(Math.atan2(i,a),Math.sqrt(1e4-a*a-i*i));S.set(a,i,r)}},{key:"animateNoiseflow",value:function(e,t){this.geom.vertices[e],this.geom.colors[e];var n=this.originalPositions[e],a=(this.originalColors[e],k(n.x/20,n.y/20+.5*t-4.213)),i=k(n.x/20+1e3,n.y/20+.5*t+26.586),r=k(n.x/20+9903,n.y/20-200+.5*t+90.492);S.set(n.x+50*a,n.y+50*i,50*r),D.setRGB(.92,.91,.93)}},{key:"animateCircleMessy",value:function(e,t){this.geom.vertices[e],this.geom.colors[e],this.originalPositions[e],this.originalColors[e];var n=Math.atan2(this.originalPositions[e].y,this.originalPositions[e].x);S.set(80*Math.cos(n)+6*k(e/10,t)-3,80*Math.sin(n)+6*k(e/10+1.953,t+399)-3,this.originalPositions[e].z+6*Math.sin(8*n+2.5*t))}},{key:"animateHeightmap",value:function(e,t){var n=this.geom.vertices[e],a=(this.geom.colors[e],this.originalPositions[e]),i=this.originalColors[e];S.set(a.x,a.y,a.z+1*Math.sin(n.x/4+n.y/7+.5*t)),D.set(i)}}]),n}(m.p);var S=new m.z,D=new m.c;var A=n(31),z=n(124);function F(e){for(var t="",n=0;n<(arguments.length<=1?0:arguments.length-1);n++)t+=e[n],t+=n+1<1||arguments.length<=n+1?void 0:arguments[n+1];return t+=e[e.length-1]}function E(){var e=Object(A.a)(["\nuniform sampler2D tSource;\nuniform vec3[10] gradient;\nuniform int gradientLength;\nuniform bool transparency;\nuniform bool enabled;\nuniform float maxBrightness;\nuniform float minBrightness;\n\nvarying vec2 vUv;\n\nvec4 getGradientColor(float t) {\n  float tOnGradient = t * float(gradientLength);\n  int lowStop = int(tOnGradient);\n  int highStop = int(tOnGradient) + 1;\n  float lerpAmount = tOnGradient - float(lowStop);\n\n  vec3 colorLow = gradient[lowStop];\n  vec3 colorHigh = gradient[highStop];\n\n  float alpha = 1.0;\n  if (transparency && lowStop == 0) {\n    alpha = lerpAmount;\n  }\n\n  return vec4(mix(colorLow, colorHigh, lerpAmount), alpha);\n}\n\nvoid main() {\n  vec4 baseColor = texture2D( tSource, vUv );\n\n  if (enabled) {\n    float brightness = dot(baseColor.rgb, vec3(0.299, 0.587, 0.114));\n    float normalizedBrightness = smoothstep(minBrightness, maxBrightness, brightness);\n\n    vec4 outColor = getGradientColor(normalizedBrightness);\n\n    gl_FragColor = outColor;\n  } else {\n    gl_FragColor = baseColor;\n  }\n}\n"]);return E=function(){return e},e}function L(){var e=Object(A.a)(["\nvarying vec2 vUv;\n\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n"]);return L=function(){return e},e}var R=function(){function e(t,n,a,i){Object(v.a)(this,e),this.source=t,this.maxBrightness=a,this.minBrightness=i,this.target=void 0,this.fsQuad=void 0,this.material=void 0,this.target=new m.A(t.image.width,t.image.height),this.material=new U(t,n,a,i),this.fsQuad=new z.a.FullScreenQuad(this.material)}return Object(f.a)(e,[{key:"texture",get:function(){return this.target.texture}}]),Object(f.a)(e,[{key:"render",value:function(e){e.setRenderTarget(this.target),this.fsQuad.render(e),e.setRenderTarget(null)}}]),e}(),U=function(e){Object(p.a)(n,e);var t=Object(x.a)(n);function n(e,a,i,r){var s;return Object(v.a)(this,n),(s=t.call(this,{uniforms:{tSource:{value:e},gradient:{value:new Array(10).fill(0).map((function(){return new m.c}))},gradientLength:{value:0},transparency:{value:!0},enabled:{value:!0},maxBrightness:{value:i},minBrightness:{value:r}},vertexShader:I,fragmentShader:T,transparent:!0})).update(a),s.needsUpdate=!0,s}return Object(f.a)(n,[{key:"update",value:function(e){var t=this,n=e.gradient.split(" ").map((function(e){return new m.c(e)})),a=n.length;n.forEach((function(e,n){t.uniforms.gradient.value[n]=e})),this.uniforms.gradientLength.value=a,this.uniforms.transparency.value=e.gradientTransparency,this.uniforms.enabled.value=e.gradientEnabled,this.needsUpdate=!0}}]),n}(m.t),I=F(L()),T=F(E()),G=function(){function e(t,n){var a=this;Object(v.a)(this,e),this.canvas=t,this.state=n,this.renderer=void 0,this.scene=void 0,this.camera=void 0,this.controls=void 0,this.adversary=void 0,this.adversaryMaterial=void 0,this.timeStarted=0,this.geom=new m.o(200,200,512,512),this.textureBase=void 0,this.gradientEffect=void 0,this.pointCloud=void 0,this.maxBrightness=void 0,this.minBrightness=void 0,this.handleWindowResize=function(){a.renderer.setSize(window.innerWidth,window.innerHeight);var e=window.innerWidth/window.innerHeight,t=100;a.camera.left=-100*e,a.camera.right=t*e,a.camera.top=t,a.camera.bottom=-100,a.camera.updateProjectionMatrix()},this.animate=function(){var e,t,n;if(requestAnimationFrame(a.animate),a.controls.update(),null!=a.adversaryMaterial&&null!=a.adversary){var i=B(0,5e3,performance.now()-a.timeStarted)*a.state.growLength/a.maxBrightness;a.adversaryMaterial.displacementScale=i,a.adversary.position.z=-i/2}"particles"===a.state.mode&&(null===(n=a.pointCloud)||void 0===n||n.animate());null===(e=a.gradientEffect)||void 0===e||e.material.update(a.state),null===(t=a.gradientEffect)||void 0===t||t.render(a.renderer),a.renderer.render(a.scene,a.camera)},this.renderer=new m.B({canvas:t}),this.renderer.setPixelRatio(window.devicePixelRatio),this.scene=new m.s,this.camera=new m.m(-1,1,1,-1,-9999,9999),this.camera.position.set(0,0,100),this.camera.lookAt(0,0,0),this.handleWindowResize(),window.addEventListener("resize",this.handleWindowResize),this.scene.add(new m.a(16777215)),this.scene.background=new m.c(1,1,1),this.loadDefaultImage(),this.controls=new g.a(this.camera,this.canvas),this.setState(n),requestAnimationFrame(this.animate)}return Object(f.a)(e,[{key:"setImage",value:function(e){var t=new m.w(e);e.onload=function(){t.needsUpdate=!0},this.recreateAdversary(t)}},{key:"setState",value:function(e){var t;this.state=e,null===(t=this.gradientEffect)||void 0===t||t.material.update(e),null!=this.adversaryMaterial&&(e.gradientEnabled?this.adversaryMaterial.map=this.gradientEffect.texture:this.adversaryMaterial.map=this.textureBase,this.adversaryMaterial.needsUpdate=!0),this.scene.background.set(e.background),"heightmap"===e.mode&&null!=this.adversary&&null==this.adversary.parent?(this.scene.add(this.adversary),this.pointCloud&&this.scene.remove(this.pointCloud)):"particles"===e.mode&&null!=this.pointCloud&&null==this.pointCloud.parent&&(this.scene.add(this.pointCloud),this.adversary&&this.scene.remove(this.adversary))}},{key:"recreateAdversary",value:function(e){var t;null!=this.adversary&&(this.scene.remove(this.adversary),null===(t=this.adversaryMaterial)||void 0===t||t.dispose());null!=this.pointCloud&&this.scene.remove(this.pointCloud),this.textureBase=e;var n=this.createDisplacementMap(e),a=n.texture,i=n.maxBrightness,r=n.minBrightness;this.maxBrightness=i,this.minBrightness=r,this.gradientEffect=new R(e,this.state,i,r),this.adversaryMaterial=new m.k({map:this.gradientEffect.texture,displacementMap:a,displacementScale:0,transparent:!0,roughness:1,metalness:0}),this.state.gradientEnabled?this.adversaryMaterial.map=this.gradientEffect.texture:this.adversaryMaterial.map=this.textureBase,this.adversary=new m.i(this.geom,this.adversaryMaterial),this.pointCloud=new P(e),"heightmap"===this.state.mode?this.scene.add(this.adversary):this.scene.add(this.pointCloud),this.renderer.render(this.scene,this.camera),this.timeStarted=performance.now()}},{key:"loadDefaultImage",value:function(){var e=this;(new m.x).load("/2005-crowdstrike-adversary/adversaries/Buffalo.jpg",(function(t){e.recreateAdversary(t)}),(function(e){return console.log(e)}),(function(e){return console.error(e)}))}},{key:"createDisplacementMap",value:function(e){for(var t=_(e.image,256),n=t.imageData,a=t.canvas,i=0,r=1,s=0;s<n.data.length;s+=4){var o=.2126*(n.data[s]/255)+.7152*(n.data[s+1]/255)+.0722*(n.data[s+2]/255);i=Math.max(o,i),r=Math.min(o,r),n.data[s]=n.data[s+1]=n.data[s+2]=o}return{texture:new m.b(a),imageData:n,maxBrightness:i,minBrightness:r}}},{key:"generateDisplacementMappedGeometry",value:function(e){var t=document.createElement("canvas");t.width=e.width/10,t.height=e.height/10;var n=t.getContext("2d");if(n){n.drawImage(e,0,0,t.width,t.height);var a,i=t.width,r=t.height,s=n.getImageData(0,0,i,r),o=new m.o(i-1,r-1,i-1,r-1),c=Object(d.a)(o.vertices);try{for(c.s();!(a=c.n()).done;){var h=a.value,l=4*(m.h.mapLinear(h.x-.5,-i/2,i/2,0,i)+i*m.h.mapLinear(h.y-.5,r/2,-r/2,0,r)),u=.2126*(s.data[l]/255)+.7152*(s.data[l+1]/255)+.0722*(s.data[l+2]/255);h.z=20*u}}catch(f){c.e(f)}finally{c.f()}var v=200/Math.max(i,r);return o.scale(v,v,1),o.computeFlatVertexNormals(),o}}}]),e}();function _(e,t){var n=document.createElement("canvas"),a=e.height/e.width*t;n.width=t,n.height=a;var i=n.getContext("2d");return i.drawImage(e,0,0,t,a),{canvas:n,imageData:i.getImageData(0,0,t,a)}}var q=function(e){var t=e.img,n=e.state,s=Object(i.useRef)(),o=r.a.useCallback((function(e){null!=e&&(s.current=new G(e,n))}),[]);return Object(i.useEffect)((function(){null!=s.current&&null!=t&&s.current.setImage(t)}),[t]),Object(i.useEffect)((function(){null!=s.current&&s.current.setState(n)}),[n]),Object(a.jsx)("canvas",{ref:o})},N=(n(271),n(55)),H=n(127),W=function(e){var t=e.onGotImage,n=Object(i.useCallback)((function(e,n,a){e.forEach((function(e){var n=new FileReader;n.onabort=function(){return console.log("file reading was aborted")},n.onerror=function(){return console.log("file reading has failed")},n.onload=function(){var e=document.createElement("img");e.src=n.result,t(e)},n.readAsDataURL(e)}))}),[t]),r=Object(H.a)({onDrop:n,maxFiles:1}),s=r.getRootProps,o=r.getInputProps,c=r.isDragActive;return Object(a.jsxs)("div",Object(N.a)(Object(N.a)({className:"dropzone"},s()),{},{children:[Object(a.jsx)("input",Object(N.a)({},o())),c?Object(a.jsx)("p",{children:"Drop the files here ..."}):Object(a.jsx)("p",{children:"Drag 'n' drop some files here, or click to select files"})]}))},Q={mode:"heightmap",particleDistortion:"noiseflow",background:"#ffffff",growLength:50,gradientEnabled:!0,gradient:"#131B1D #31474D #FC0000 #ABABAB #FFFFFF",gradientTransparency:!0};var J=function(){var e=Object(i.useState)(),t=Object(l.a)(e,2),n=t[0],r=t[1],s=Object(i.useState)(Q),o=Object(l.a)(s,2),c=o[0],h=o[1];return Object(i.useEffect)((function(){Object.assign(Q,c)}),[c]),Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(q,{img:n,state:c}),Object(a.jsx)(W,{onGotImage:r}),Object(a.jsxs)(u.g,{data:c,onUpdate:h,children:[Object(a.jsx)(u.e,{path:"mode",label:"Mode",options:["heightmap","particles"]}),Object(a.jsx)(u.e,{path:"particleDistortion",label:"Particle Distortion",options:["noiseflow","sphere","messycircle"]}),Object(a.jsx)(u.b,{path:"background",label:"Background"}),Object(a.jsx)(u.d,{path:"growLength",label:"Grow Length",min:0,max:999,step:10}),Object(a.jsxs)(u.c,{closed:!1,title:"Gradient",children:[Object(a.jsx)(u.a,{path:"gradientEnabled",label:"Gradient Enabled?"}),Object(a.jsx)(u.f,{path:"gradient",label:"Gradient"}),Object(a.jsx)(u.a,{path:"gradientTransparency",label:"Transparency?"})]})]})]})};function V(){var e=Object(A.a)(["\nuniform vec2 resolution; // The width and height of our screen\nuniform sampler2D feedback; // Our input texture\nuniform float time;\nuniform vec2 mouse;\n\nvarying vec2 vUv;\n\n","\n\nfloat brightness(vec3 col) {\n  return dot(col.rgb, vec3(0.299, 0.587, 0.114));\n}\n\nvoid main() {\n  vec2 uv = gl_FragCoord.xy / resolution.xy;\n  vec2 delta = 1.0 / resolution.xy;\n  vec2 mouseNorm = vec2(0.5) - mouse;\n\n  vec4 uv0 = texture2D(feedback, uv);\n  vec4 finalColor = uv0;\n\n  float dif = 1.0; // sin(time) * 0.2;\n  vec2 puv = uv;\n  for (int i = 0; i < 10; i++) {\n    vec2 offset = vec2(\n      cnoise(puv * 2. + vec2(time, 0)),\n      cnoise(puv * 2. + vec2(91.3 - time, -123.2 + time))\n    );\n    offset -= mouseNorm * 10.;\n\n    puv = puv + delta * offset * 2.;\n\n    vec4 up = texture2D(feedback, puv);\n\n    if (dif * (brightness(up.rgb) - brightness(finalColor.rgb)) > 0.) {\n      finalColor = mix(finalColor, up, 0.5);\n    }\n  }\n\n  gl_FragColor = finalColor;\n}\n"]);return V=function(){return e},e}function X(){var e=Object(A.a)(["\n//\tClassic Perlin 2D Noise \n//\tby Stefan Gustavson\n//\nvec2 fade(vec2 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}\nvec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}\nvec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}\n\n\nfloat cnoise(vec2 P){\n  vec4 Pi = floor(P.xyxy) + vec4(0.0, 0.0, 1.0, 1.0);\n  vec4 Pf = fract(P.xyxy) - vec4(0.0, 0.0, 1.0, 1.0);\n  Pi = mod(Pi, 289.0); // To avoid truncation effects in permutation\n  vec4 ix = Pi.xzxz;\n  vec4 iy = Pi.yyww;\n  vec4 fx = Pf.xzxz;\n  vec4 fy = Pf.yyww;\n  vec4 i = permute(permute(ix) + iy);\n  vec4 gx = 2.0 * fract(i * 0.0243902439) - 1.0; // 1/41 = 0.024...\n  vec4 gy = abs(gx) - 0.5;\n  vec4 tx = floor(gx + 0.5);\n  gx = gx - tx;\n  vec2 g00 = vec2(gx.x,gy.x);\n  vec2 g10 = vec2(gx.y,gy.y);\n  vec2 g01 = vec2(gx.z,gy.z);\n  vec2 g11 = vec2(gx.w,gy.w);\n  vec4 norm = 1.79284291400159 - 0.85373472095314 * \n    vec4(dot(g00, g00), dot(g01, g01), dot(g10, g10), dot(g11, g11));\n  g00 *= norm.x;\n  g01 *= norm.y;\n  g10 *= norm.z;\n  g11 *= norm.w;\n  float n00 = dot(g00, vec2(fx.x, fy.x));\n  float n10 = dot(g10, vec2(fx.y, fy.y));\n  float n01 = dot(g01, vec2(fx.z, fy.z));\n  float n11 = dot(g11, vec2(fx.w, fy.w));\n  vec2 fade_xy = fade(Pf.xy);\n  vec2 n_x = mix(vec2(n00, n01), vec2(n10, n11), fade_xy.x);\n  float n_xy = mix(n_x.x, n_x.y, fade_xy.y);\n  return 2.3 * n_xy;\n}\n"]);return X=function(){return e},e}function Y(){var e=Object(A.a)(["\nvarying vec2 vUv;\n\nvoid main()\t{\n\tvUv = uv;\n\tgl_Position = vec4( position, 1.0 );\n}\n"]);return Y=function(){return e},e}var K=function(){function e(t,n){var a=this;Object(v.a)(this,e),this.canvas=t,this.imgTexture=n,this.renderer=void 0,this.scene=void 0,this.camera=void 0,this.textureA=void 0,this.textureB=void 0,this.bufferMaterial=void 0,this.finalMaterial=void 0,this.bufferObject=void 0,this.bufferScene=new m.s,this.quad=void 0,this.mouse=new m.y,this.animate=function(){requestAnimationFrame(a.animate),a.renderB(),a.bufferObject.material.uniforms.mouse.value=new m.y(a.mouse.x,a.mouse.y),a.bufferMaterial.uniforms.time.value+=.01,a.renderer.render(a.scene,a.camera)},this.onDocumentMouseMove=function(e){e.preventDefault(),a.mouse.x=e.clientX/window.innerWidth,a.mouse.y=1-e.clientY/window.innerHeight},this.renderer=new m.B({canvas:t}),this.scene=new m.s;var i=t,r=i.width,s=i.height;this.camera=new m.m(r/-2,r/2,s/2,s/-2,1,1e3),this.camera.position.z=2,this.textureA=new m.A(t.width,t.height,{minFilter:m.f,magFilter:m.l}),this.textureB=new m.A(t.width,t.height,{minFilter:m.f,magFilter:m.l}),this.bufferMaterial=new m.t({uniforms:{feedback:{value:this.textureA.texture},resolution:{value:new m.y(t.width,t.height)},mouse:{value:new m.y(0,0)},time:{value:Math.random()*Math.PI*2+Math.PI}},vertexShader:Z,fragmentShader:ee});var o=new m.n(t.width,t.height);this.bufferObject=new m.i(o,this.bufferMaterial),this.bufferScene.add(this.bufferObject),this.finalMaterial=new m.j({map:this.textureB.texture,transparent:!0}),this.quad=new m.i(o,this.finalMaterial),this.scene.add(this.quad),this.finalMaterial.map=n,this.renderer.setRenderTarget(this.textureA),this.renderer.clear(),this.renderer.render(this.scene,this.camera),this.renderer.setRenderTarget(null),this.finalMaterial.map=this.textureB.texture,requestAnimationFrame(this.animate),console.log(this),window.addEventListener("mousemove",this.onDocumentMouseMove)}return Object(f.a)(e,[{key:"renderB",value:function(){this.renderer.setRenderTarget(this.textureB),this.renderer.clear(),this.renderer.render(this.bufferScene,this.camera),this.renderer.setRenderTarget(null)}},{key:"swap",value:function(){var e=this.textureA;this.textureA=this.textureB,this.textureB=e,this.finalMaterial.map=this.textureB.texture,this.bufferMaterial.uniforms.feedback.value=this.textureA.texture}}]),e}(),Z=F(Y()),$=F(X()),ee=F(V(),$);var te=function(){var e=Object(i.useRef)(),t=r.a.useCallback((function(t){null!=t&&(new m.x).load("/2005-crowdstrike-adversary/tone-mapped-Buffalo.png",(function(n){t.width=n.image.width,t.height=n.image.height,e.current=new K(t,n)}))}),[]);return Object(a.jsx)("div",{style:{background:"grey",width:"100vw",height:"100vh"},children:Object(a.jsx)("canvas",{ref:t,style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}})})},ne=(n(272),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,276)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),i(e),r(e),s(e)}))});o.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(c.a,{children:Object(a.jsxs)(h.c,{children:[Object(a.jsx)(h.a,{path:"/pixelbleed",children:Object(a.jsx)(te,{})}),Object(a.jsx)(h.a,{children:Object(a.jsx)(J,{})})]})})}),document.getElementById("root")),ne()}},[[275,1,2]]]);
//# sourceMappingURL=main.63fb7e63.chunk.js.map